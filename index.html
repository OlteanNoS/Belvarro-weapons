<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>FiveM Craft Calculator</title>
<style>
body {
    margin:0;
    font-family: Arial;
    background: url("background.jpg") no-repeat center center/cover;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
}
.container {
    background: rgba(0,0,0,0.85);
    padding: 30px;
    width:700px;
    border-radius: 10px;
    color:white;
}
select, input, button {
    width:100%;
    padding:8px;
    margin-top:10px;
}
button {
    cursor:pointer;
    background:#2ecc71;
    border:none;
    color:white;
    font-weight:bold;
}
.result {
    margin-top:20px;
    padding:15px;
    background:#111;
    border-radius:8px;
}
h3 {margin:10px 0 5px 0;}
label{display:block; margin:5px 0;}
</style>
</head>
<body>
<div class="container">
<h3>Ce vrei să craftezi?</h3>
<select id="weaponSelect">
<option value="">-- Selectează arma --</option>
</select>

<div id="bulletsSection" style="display:none;">
<h3>Câte gloanțe vrei?</h3>
<select id="bullets">
<option value="100">100</option>
<option value="200">200</option>
<option value="250">250</option>
<option value="300">300</option>
<option value="400">400</option>
<option value="500">500</option>
<option value="600">600</option>
<option value="700">700</option>
<option value="800">800</option>
<option value="900">900</option>
<option value="1000">1000</option>
<option value="1500">1500</option>
<option value="2000">2000</option>
</select>
</div>

<div id="attachmentsSection" style="display:none;">
<h3>Atașamente</h3>
<label><input type="checkbox" value="none" id="noAttach"> Nu vreau atașamente</label>
<div id="attachmentList"></div>
</div>

<div id="quantitySection" style="display:none;">
<h3>Câte arme vrei?</h3>
<input type="number" id="weaponQty" min="1" value="1">
</div>

<button onclick="calculate()">Calculează</button>

<div id="result" class="result" style="display:none;"></div>
</div>

<script>
// ==================================
// ARME + MATERIAL + ATAȘAMENTE + GLOANTE
// ==================================
const weapons = {
"PISTOL":{type:"craft",materials:{steel:8,screw:80,barrel:0,spring:1,wood:0,polymer:20},
    bullets:{100:{powder:100,price:5400},200:{powder:200,price:10666},250:{powder:250,price:13333}},
    attachments:{lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},amortizor:{steel:2,screw:5,polymer:2},incarcator:{steel:1,screw:5,arc:1,polymer:1}}
},
"COMBAT PISTOL":{type:"craft",materials:{steel:8,screw:85,barrel:0,spring:0,wood:0,polymer:18},
    bullets:{100:{powder:100,price:5400},200:{powder:200,price:10700},250:{powder:250,price:13400}},
    attachments:{lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},amortizor:{steel:2,screw:5,polymer:2},incarcator:{steel:1,screw:5,arc:1,polymer:1}}
},
"PISTOL MK2":{type:"craft",materials:{steel:9,screw:91,barrel:0,spring:1,wood:0,polymer:22},
    bullets:{100:{powder:130,price:7000},200:{powder:260,price:13900},250:{powder:325,price:17400}},
    attachments:{incarcator:{steel:1,screw:5,arc:1,polymer:1},mounted_scope:{steel:2,screw:10,polymer:2,bec:0,lupa:1},amortizor:{steel:2,screw:5,polymer:2},lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1}}
},
"CERAMIC PISTOL":{type:"craft",materials:{steel:9,screw:91,barrel:0,spring:1,wood:0,polymer:18},
    bullets:{100:{powder:130,price:7000},200:{powder:260,price:13900},250:{powder:325,price:17400}},
    attachments:{amortizor:{steel:2,screw:5,polymer:2},incarcator:{steel:1,screw:5,arc:1,polymer:1}}
},
"PISTOL WM29 (XM3)":{type:"craft",materials:{steel:10,screw:95,barrel:0,spring:1,wood:0,polymer:20},
    bullets:{100:{powder:130,price:7000},200:{powder:260,price:13900},250:{powder:325,price:17400}},
    attachments:{amortizor:{steel:2,screw:5,polymer:2}}
},
"MICRO SMG":{type:"craft",materials:{steel:15,screw:95,barrel:1,spring:1,wood:0,polymer:42},
    bullets:{100:{powder:150,price:8000},200:{powder:300,price:16000},250:{powder:375,price:20000}},
    attachments:{luneta:{steel:2,screw:10,polymer:2,lupa:1},lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},amortizor:{steel:3,screw:5,polymer:3},incarcator:{steel:2,screw:10,arc:1,polymer:2}}
},
"MACHINE PISTOL (Tec9)":{type:"craft",materials:{steel:12,screw:100,barrel:0,spring:1,wood:0,polymer:38},
    bullets:{100:{powder:150,price:8000},200:{powder:300,price:16000},250:{powder:375,price:20000}},
    attachments:{incarcator:{steel:2,screw:8,arc:1,polymer:2},amortizor:{steel:2,screw:5,polymer:2},baterie:{steel:3,screw:20,arc:1,polymer:3}}
},
"MINI SMG":{type:"craft",materials:{steel:11,screw:97,barrel:0,spring:1,wood:1,polymer:36},
    bullets:{100:{powder:150,price:8000},200:{powder:300,price:16000},250:{powder:375,price:20000}},
    attachments:{incarcator:{steel:2,screw:10,arc:1,polymer:2}}
},
"TEC PISTOL (Tactical SMG)":{type:"craft",materials:{steel:14,screw:115,barrel:1,spring:1,wood:0,polymer:44},
    bullets:{100:{powder:180,price:10000},200:{powder:360,price:19000},250:{powder:450,price:24000}},
    attachments:{luneta:{steel:2,screw:10,polymer:2,lupa:1},incarcator:{steel:2,screw:10,arc:1,polymer:2},suppressor:{steel:3,screw:5,polymer:3}}
},
"SMG":{type:"craft",materials:{steel:13,screw:105,barrel:1,spring:1,wood:0,polymer:48},
    bullets:{100:{powder:180,price:10000},200:{powder:360,price:19000},250:{powder:450,price:24000}},
    attachments:{incarcator:{steel:2,screw:10,arc:1,polymer:2},baterie:{steel:3,screw:20,arc:1,polymer:3},lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},amortizor:{steel:3,screw:5,polymer:3},luneta:{steel:2,screw:10,polymer:2,lupa:1}}
},
"COMBAT PDW":{type:"craft",materials:{steel:14,screw:110,barrel:1,spring:1,wood:0,polymer:50},
    bullets:{100:{powder:180,price:10000},200:{powder:360,price:19000},250:{powder:450,price:24000}},
    attachments:{lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},baterie:{steel:3,screw:20,arc:1,polymer:3},luneta:{steel:2,screw:10,polymer:2,lupa:1},incarcator:{steel:2,screw:10,arc:1,polymer:2},grip:{steel:1,screw:5,arc:1,polymer:0}}
},
"ASSAULT RIFLE (AK)":{type:"craft",materials:{steel:21,screw:135,barrel:1,spring:2,wood:1,polymer:68},
    bullets:{100:{powder:250,price:13400},200:{powder:500,price:26700},250:{powder:625,price:33400}},
    attachments:{luneta:{steel:2,screw:10,polymer:2,lupa:1},baterie:{steel:3,screw:20,arc:1,polymer:3},amortizor:{steel:3,screw:5,polymer:3},incarcator:{steel:2,screw:5,arc:1,polymer:2},grip:{steel:1,screw:5,arc:1,polymer:0},lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1}}
},
"COMPACT RIFLE":{type:"craft",materials:{steel:19,screw:115,barrel:1,spring:2,wood:1,polymer:44},
    bullets:{100:{powder:250,price:13400},200:{powder:500,price:26700},250:{powder:625,price:33400}},
    attachments:{incarcator:{steel:3,screw:30,arc:1,polymer:3},baterie:{steel:3,screw:20,arc:1,polymer:3}}
},
"CARABINE RIFLE":{type:"craft",materials:{steel:18,screw:140,barrel:1,spring:2,wood:0,polymer:72},
    bullets:{100:{powder:300,price:16000},200:{powder:600,price:32000},250:{powder:750,price:40000}},
    attachments:{grip:{steel:1,screw:5,arc:1},incarcator:{steel:1,screw:5,arc:1,polymer:1},luneta:{steel:2,screw:10,polymer:2,lupa:1},baterie:{steel:3,screw:20,arc:1,polymer:3},amortizor:{steel:3,screw:5,polymer:3},lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1}}
},
"ADVANCED RIFLE":{type:"craft",materials:{steel:18,screw:145,barrel:1,spring:2,wood:0,polymer:78},
    bullets:{100:{powder:300,price:16000},200:{powder:600,price:32000},250:{powder:750,price:40000}},
    attachments:{lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},amortizor:{steel:3,screw:5,polymer:3},incarcator:{steel:1,screw:5,arc:1,polymer:1},luneta:{steel:2,screw:10,polymer:2,lupa:1}}
},
// Arme pe bani
"NAVY PISTOL":{type:"money",price:400000,attachments:{}},
"VINTAGE PISTOL":{type:"money",price:25000,attachments:{incarcator:{steel:1,screw:5,arc:1,polymer:1},amortizor:{steel:2,screw:5,polymer:2}}},
"DB":{type:"money",price:250000,attachments:{}},
"ASSAULTRIFLE MK2 (AK)":{type:"money",price:70000,attachments:{}},
"HEAVYRIFLE":{type:"money",price:60000,attachments:{}},
"COMBAT MG MK2":{type:"money",price:120000,attachments:{}},
"GUSENBERG":{type:"money",price:45000,attachments:{}},
"COMBAT MG":{type:"money",price:90000,attachments:{}}
};

// ==================================
// POPULARE DROPDOWN
// ==================================
const weaponSelectEl = document.getElementById("weaponSelect");
weaponSelectEl.innerHTML = '<option value="">-- Selectează arma --</option>';
Object.keys(weapons).forEach(w => {
    const option = document.createElement("option");
    option.value = w;
    option.text = w;
    weaponSelectEl.appendChild(option);
});

// ==================================
// LOGICA ATAȘAMENTE
// ==================================
weaponSelectEl.addEventListener("change", function(){
    const weapon = weapons[this.value];
    document.getElementById("result").style.display="none";
    if(!weapon) {
        document.getElementById("bulletsSection").style.display="none";
        document.getElementById("attachmentsSection").style.display="none";
        document.getElementById("quantitySection").style.display="none";
        return;
    }
    if(weapon.type==="craft") document.getElementById("bulletsSection").style.display="block";
    else document.getElementById("bulletsSection").style.display="none";

    document.getElementById("attachmentsSection").style.display="block";
    const attachDiv = document.getElementById("attachmentList");
    attachDiv.innerHTML = "";
    if(weapon.attachments){
        Object.keys(weapon.attachments).forEach(att => {
            const label = document.createElement("label");
            label.innerHTML = `<input type="checkbox" value="${att}" class="attachCheck"> ${att}`;
            attachDiv.appendChild(label);
        });
    }
    document.getElementById("quantitySection").style.display="block";
});

document.getElementById("noAttach").addEventListener("change", function(){
    const checks = document.querySelectorAll(".attachCheck");
    if(this.checked){
        checks.forEach(c => c.checked=false);
        checks.forEach(c => c.disabled=true);
    } else {
        checks.forEach(c => c.disabled=false);
    }
});

// ==================================
// CALCUL
// ==================================
function calculate(){
    const weaponKey = document.getElementById("weaponSelect").value;
    const weapon = weapons[weaponKey];
    if(!weapon) return;
    const qty = parseInt(document.getElementById("weaponQty").value);
    let totalSteel = 0, totalPolymer = 0, totalPowder = 0, totalCost = 0;

    if(weapon.type==="craft"){
        totalSteel += weapon.materials.steel*qty;
        totalSteel += Math.floor(weapon.materials.screw*qty/20);
        totalSteel += weapon.materials.barrel*4*qty;
        totalPolymer += weapon.materials.polymer*qty;

        const bullets = parseInt(document.getElementById("bullets").value);
        const baseBullet = weapon.bullets[bullets] || weapon.bullets[100];
        totalPowder += baseBullet.powder*qty;
        totalCost += baseBullet.price*qty;

        totalCost += totalSteel*5000;
        totalCost += totalPolymer*150;
    } else {
        totalCost += weapon.price*qty;
    }

    const selectedAttachments = document.querySelectorAll(".attachCheck:checked");
    selectedAttachments.forEach(att => {
        const data = weapon.attachments[att.value];
        if(!data) return;
        totalSteel += data.steel || 0;
        totalSteel += Math.floor((data.screw||0)/20);
        totalPolymer += data.polymer || 0;
    });

    document.getElementById("result").style.display = "block";
    document.getElementById("result").innerHTML = `
        <h3>Rezultat</h3>
        Oțel total: ${totalSteel}<br>
        Polimer total: ${totalPolymer}<br>
        Praf de pușcă: ${totalPowder}<br><br>
        <strong>Cost total estimativ: ${totalCost.toLocaleString()}$</strong>
    `;
}
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>FiveM Armes Craft Calculator Animat & Interactiv</title>
<style>
body {
    margin:0;
    font-family: Arial;
    background:#111;
    color:white;
    display:flex;
    justify-content:center;
    padding:20px;
}
.container {
    background: rgba(0,0,0,0.95);
    padding:30px;
    width:1000px;
    border-radius:10px;
    transition:all 0.3s;
}
.field {
    display: flex;
    align-items: center;
    margin: 10px 0;
}
.field label {
    width: 200px;
    margin-right: 15px;
}
.field select, .field input {
    flex: 1;
    padding:8px;
    font-size:14px;
    border-radius:5px;
    border:1px solid #444;
    background:#222;
    color:white;
    transition:0.3s;
}
.field select:hover, .field input:hover {
    background:#333;
}
.field select:focus, .field input:focus {
    outline:none;
    border-color:#2ecc71;
}
button {
    cursor:pointer;
    background:#2ecc71;
    border:none;
    color:white;
    font-weight:bold;
    padding:10px;
    margin-top:15px;
    transition:0.3s;
}
button:hover {background:#27ae60;}
.result {
    margin-top:20px;
    padding:15px;
    background:#222;
    border-radius:8px;
    transition:all 0.5s;
    transform: translateY(-20px);
    opacity:0;
}
.result.show {
    opacity:1;
    transform: translateY(0);
}
h3 {margin:10px 0 5px 0;}
.attachStep {
    display:flex;
    align-items:center;
    margin:5px 0;
    opacity:0;
    transform:translateX(-20px);
    transition: all 0.4s;
}
.attachStep.show {
    opacity:1;
    transform:translateX(0);
}
.attachStep input[type="checkbox"] {
    margin-right:10px;
    width:18px;
    height:18px;
    accent-color:#2ecc71; /* culoare checkbox selectat */
    cursor:pointer;
}
.attachStep input[type="checkbox"]:hover {
    transform: scale(1.2);
    transition:0.2s;
}
section {
    overflow:hidden;
    max-height:0;
    opacity:0;
    transition:max-height 0.5s ease-out, opacity 0.3s;
}
section.show {max-height:500px;opacity:1;}
.popup {
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:rgba(0,0,0,0.7);
    display:flex;
    justify-content:center;
    align-items:center;
    opacity:0;
    transform:translateY(50px);
    transition:all 0.4s;
    pointer-events:none;
}
.popup.show {
    opacity:1;
    transform:translateY(0);
    pointer-events:auto;
}
.popupContent {
    background:#222;
    padding:20px;
    border-radius:10px;
    color:white;
    min-width:300px;
}
.popupContent button {margin-top:10px;cursor:pointer;}
</style>
</head>
<body>
<div class="container">
<h3>Ce vrei să craftezi?</h3>
<div class="field">
<label for="weaponSelect">Arma:</label>
<select id="weaponSelect"><option value="">-- Selectează arma --</option></select>
</div>

<section id="bulletsSection">
<div class="field">
<label for="bullets">Gloanțe:</label>
<select id="bullets"></select>
</div>
</section>

<section id="attachmentsSection">
<h3>Atașamente</h3>
<label><input type="checkbox" id="noAttach"> Nu vreau atașamente</label>
<div id="attachmentList"></div>
</section>

<section id="quantitySection">
<div class="field">
<label for="weaponQty">Număr arme:</label>
<input type="number" id="weaponQty" min="1" value="1">
</div>
</section>

<button id="calcBtn" style="display:none;">Calculează</button>
<div id="result" class="result"></div>
</div>

<div class="popup" id="popup">
<div class="popupContent">
<p id="popupText"></p>
<button onclick="document.getElementById('popup').classList.remove('show')">OK</button>
</div>
</div>

<script>

// ==================== DATELE ARME ====================

const weapons = {

"PISTOL": craft(8,80,0,1,20,"pistol"),
"COMBAT PISTOL": craft(8,85,0,0,18,"pistol"),
"PISTOL MK2": craft(9,91,0,1,22,"pistol_mk2"),
"CERAMIC PISTOL": craft(9,91,0,0,18,"pistol_mk2"),
"PISTOL WM29 (XM3)": craft(10,95,0,1,20,"pistol_mk2"),

"MICRO SMG": craft(15,95,0,1,42,"smg"),
"MACHINE PISTOL (Tec9)": craft(12,100,0,1,38,"smg"),
"MINI SMG": craft(11,97,0,1,36,"smg"),
"TEC PISTOL (Tactical SMG)": craft(14,110,0,1,40,"smg_heavy"),
"SMG": craft(14,110,0,1,40,"smg_heavy"),
"COMBAT PDW": craft(16,120,0,1,45,"smg_heavy"),

"ASSAULT RIFLE (AK)": craft(21,135,1,2,68,"rifle"),
"COMPACT RIFLE": craft(20,130,1,2,65,"rifle"),
"CARABINE RIFLE": craft(22,140,1,2,70,"rifle_heavy"),
"ADVANCED RIFLE": craft(22,140,1,2,70,"rifle_heavy"),

"Navy Pistol": money(400000,"navy"),
"VINTIGE PISTOL": money(25000,"pistol"),
"DB": money(250000,"shotgun"),
"ASSAULTRIFE MK2 (AK)": money(70000,"rifle"),
"HEAVYRIFLE": money(60000,"rifle_heavy"),
"COMBAT MG": money(120000,"mg"),
"GUSENBERG": money(45000,"smg"),
"MG": money(90000,"mg")

};

// ==================== AMMO TYPES ====================

const ammoTypes = {

pistol: ammo(100,5400,200,10700,250,13400),
pistol_mk2: ammo(130,7000,260,13900,325,17400),
smg: ammo(150,8000,300,16000,375,20000),
smg_heavy: ammo(180,10000,360,19000,450,24000),
rifle: ammo(250,13400,500,26700,625,33400),
rifle_heavy: ammo(300,16000,600,32000,750,40000),
mg: ammo(500,26700,1000,54000,1250,66700),
shotgun: ammo(150,8000,300,16000,375,20000),
navy: ammo(180,9600,360,19000,450,24000)

};

// ==================== HELPERS ====================

function craft(steel,screw,barrel,spring,polymer,ammoType){
 return {
  type:"craft",
  materials:{steel,screw,barrel,spring,wood:0,polymer},
  ammoType,
  attachments:{}
 };
}

function money(price,ammoType){
 return {type:"money",price,ammoType,attachments:{}};
}

function ammo(p1,c1,p2,c2,p3,c3){
 return {
 100:{powder:p1,price:c1},
 200:{powder:p2,price:c2},
 250:{powder:p3,price:c3}
 };
}

// ==================== UI ====================

const weaponSelect=document.getElementById("weaponSelect");
const bulletsSection=document.getElementById("bulletsSection");
const bulletsSelect=document.getElementById("bullets");
const attachmentsSection=document.getElementById("attachmentsSection");
const quantitySection=document.getElementById("quantitySection");
const calcBtn=document.getElementById("calcBtn");
const resultDiv=document.getElementById("result");

Object.keys(weapons).forEach(w=>{
 const opt=document.createElement("option");
 opt.value=w;
 opt.text=w;
 weaponSelect.appendChild(opt);
});

function showSection(section){section.classList.add("show");}
function hideSection(section){section.classList.remove("show");}

// ==================== SELECT WEAPON ====================

weaponSelect.addEventListener("change",()=>{

 const weapon = weapons[weaponSelect.value];

 hideSection(bulletsSection);
 hideSection(quantitySection);
 calcBtn.style.display="none";
 resultDiv.classList.remove("show");

 if(!weapon) return;

 bulletsSelect.innerHTML="";

 const ammo = ammoTypes[weapon.ammoType];

 Object.keys(ammo).forEach(b=>{
  const opt=document.createElement("option");
  opt.value=b;
  opt.text=`${b} gloanțe — ${ammo[b].powder} praf — ${ammo[b].price.toLocaleString()}$`;
  bulletsSelect.appendChild(opt);
 });

 showSection(bulletsSection);
 showSection(quantitySection);
 calcBtn.style.display="block";

});

// ==================== CALCUL ====================

calcBtn.addEventListener("click",()=>{

 const weapon = weapons[weaponSelect.value];
 const qty = parseInt(document.getElementById("weaponQty").value)||1;

 if(!weapon) return;

 const totals={steel:0,screw:0,barrel:0,spring:0,wood:0,polymer:0,powder:0};

 let totalCost = 0;

const ammo = ammoTypes[weapon.ammoType];

Object.keys(ammo).forEach(b=>{
 const opt=document.createElement("option");
 opt.value=b;
 opt.text=`${b} gloanțe — ${ammo[b].powder} praf — ${ammo[b].price.toLocaleString()}$`;
 bulletsSelect.appendChild(opt);
});

setTimeout(()=>showSection(bulletsSection),50);
setTimeout(()=>showSection(quantitySection),50);
calcBtn.style.display="block";
  }

  totalCost+=totals.steel*5000;
  totalCost+=Math.floor(totals.screw/20)*5000;
  totalCost+=totals.barrel*4*5000;
  totalCost+=totals.polymer*150;
 }

 if(weapon.type==="money"){
  totalCost+=weapon.price*qty;
 }

 const ammo = ammoTypes[weapon.ammoType];
 const bulletData = ammo[bulletsSelect.value];

 totals.powder += bulletData.powder * qty;
 totalCost += bulletData.price * qty;

 resultDiv.innerHTML=`
 <h3>Rezultat</h3>
 Oțel: ${totals.steel}<br>
 Șurub: ${totals.screw}<br>
 Țeavă: ${totals.barrel}<br>
 Arc: ${totals.spring}<br>
 Lemn: ${totals.wood}<br>
 Polimer: ${totals.polymer}<br>
 Praf de pușcă: ${totals.powder}<br><br>
 <strong>Cost total: ${totalCost.toLocaleString()}$</strong>
 `;

 resultDiv.classList.add("show");

});

</script>



// ==================== ELEMENTE UI ====================
const weaponSelect=document.getElementById("weaponSelect");
const bulletsSection=document.getElementById("bulletsSection");
const bulletsSelect=document.getElementById("bullets");
const attachmentsSection=document.getElementById("attachmentsSection");
const attachmentList=document.getElementById("attachmentList");
const quantitySection=document.getElementById("quantitySection");
const calcBtn=document.getElementById("calcBtn");
const resultDiv=document.getElementById("result");

// Populare select arme
Object.keys(weapons).forEach(w=>{
    const opt=document.createElement("option"); opt.value=w; opt.text=w;
    weaponSelect.appendChild(opt);
});


// ==================== FUNCTII ====================
function showSection(section){section.classList.add("show");}
function hideSection(section){section.classList.remove("show");}
function showPopup(msg){document.getElementById('popupText').innerText=msg;document.getElementById('popup').classList.add('show');}

// ==================== LOGIC PROGRESIV ====================
weaponSelect.addEventListener("change",()=>{
    const weapon=weapons[weaponSelect.value];
    hideSection(bulletsSection); hideSection(attachmentsSection); hideSection(quantitySection);
    calcBtn.style.display="none"; resultDiv.classList.remove("show");
    bulletsSelect.innerHTML=""; attachmentList.innerHTML="";
    document.getElementById("noAttach").checked=false;

    if(!weapon) return;

    if(weapon.type==="craft"){
        Object.keys(weapon.bullets).forEach(b=>{
            const opt=document.createElement("option"); opt.value=b; opt.text=b;
            bulletsSelect.appendChild(opt);
        });
        setTimeout(()=>showSection(bulletsSection),50);
    } else {
        setTimeout(()=>showSection(quantitySection),50);
        calcBtn.style.display="block";
    }
});

bulletsSelect.addEventListener("change",()=>{
    const weapon=weapons[weaponSelect.value];
    if(!weapon || !weapon.attachments) return;
    attachmentList.innerHTML="";
    showSection(attachmentsSection);

    const keys=Object.keys(weapon.attachments);
    let i=0;
    function addNextAttachment(){
        if(i>=keys.length) return;
        const att=keys[i];
        const lbl=document.createElement("label"); lbl.className="attachStep";
        lbl.innerHTML=`<input type="checkbox" class="attachCheck" value="${att}"> ${att}`;
        attachmentList.appendChild(lbl);
        setTimeout(()=>{lbl.classList.add('show'); addNextAttachment();},100);
        i++;
    }
    addNextAttachment();
    setTimeout(()=>showSection(quantitySection),50);
    calcBtn.style.display="block";
});

document.getElementById("noAttach").addEventListener("change",function(){
    document.querySelectorAll(".attachCheck").forEach(c=>{c.checked=false;c.disabled=this.checked;});
});

// ==================== CALCUL ====================
calcBtn.addEventListener("click",()=>{
    const weaponKey=weaponSelect.value;
    const weapon=weapons[weaponKey];
    const qty=parseInt(document.getElementById("weaponQty").value)||1;
    if(!weapon){showPopup('Selectează o armă!'); return;}
    const totals={steel:0,screw:0,barrel:0,spring:0,wood:0,polymer:0,:0};

    if(weapon.type==="craft"){
        for(let k of ["steel","screw","barrel","spring","wood","polymer"])
            totals[k]+=weapon.materials[k]*qty;

    const ammo = ammoTypes[weapon.ammoType];
const bulletData = ammo[bulletsSelect.value];

totals.powder += bulletData.powder * qty;
totalCost += bulletData.price * qty;
    }


    document.querySelectorAll(".attachCheck:checked").forEach(att=>{
        const data=weapon.attachments[att.value];
        if(!data) return;
        for(let k of ["steel","screw","barrel","spring","wood","polymer"])
            totals[k]+=(data[k]||0)*qty;
    });

    let totalCost=0;
    if(weapon.type==="craft"){
        totalCost+=totals.steel*5000;
        totalCost+=Math.floor(totals.screw/20)*5000;
        totalCost+=totals.barrel*4*5000;
        totalCost+=totals.polymer*150;
    }else totalCost+=weapon.price*qty;

    resultDiv.innerHTML=`<h3>Rezultat</h3>
    Oțel: ${totals.steel}<br>
    Șurub: ${totals.screw}<br>
    Țeavă: ${totals.barrel}<br>
    Arc: ${totals.spring}<br>
    Lemn: ${totals.wood}<br>
    Polimer: ${totals.polymer}<br>
    Praf de pușcă: ${totals.powder}<br>
    <br><strong>Cost total estimativ: ${totalCost.toLocaleString()}$</strong>`;
    resultDiv.classList.add("show");
});
</script>
</body>
</html>

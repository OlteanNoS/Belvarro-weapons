<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>FiveM Armes Craft Calculator Animat & Interactiv</title>
<style>
body { margin:0; font-family: Arial; background:#111; color:white; display:flex; justify-content:center; padding:20px; }
.container { background: rgba(0,0,0,0.95); padding:30px; width:1000px; border-radius:10px; transition:all 0.3s; }
.field { display: flex; align-items: center; margin: 10px 0; }
.field label { width: 200px; margin-right: 15px; }
.field select, .field input { flex: 1; padding:8px; font-size:14px; border-radius:5px; border:1px solid #444; background:#222; color:white; transition:0.3s; }
.field select:hover, .field input:hover { background:#333; }
.field select:focus, .field input:focus { outline:none; border-color:#2ecc71; }
button { cursor:pointer; background:#2ecc71; border:none; color:white; font-weight:bold; padding:10px; margin-top:15px; transition:0.3s; }
button:hover {background:#27ae60;}
.result { margin-top:20px; padding:15px; background:#222; border-radius:8px; transition:all 0.5s; transform: translateY(-20px); opacity:0; }
.result.show { opacity:1; transform: translateY(0); }
h3 {margin:10px 0 5px 0;}
.attachStep { display:flex; align-items:center; margin:5px 0; opacity:0; transform:translateX(-20px); transition: all 0.4s; }
.attachStep.show { opacity:1; transform:translateX(0); }
.attachStep input[type="checkbox"] { margin-right:10px; width:18px; height:18px; accent-color:#2ecc71; cursor:pointer; }
.attachStep input[type="checkbox"]:hover { transform: scale(1.2); transition:0.2s; }
section { overflow:hidden; max-height:0; opacity:0; transition:max-height 0.5s ease-out, opacity 0.3s; }
section.show {max-height:500px;opacity:1;}
.popup { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); display:flex; justify-content:center; align-items:center; opacity:0; transform:translateY(50px); transition:all 0.4s; pointer-events:none; }
.popup.show { opacity:1; transform:translateY(0); pointer-events:auto; }
.popupContent { background:#222; padding:20px; border-radius:10px; color:white; min-width:300px; }
.popupContent button {margin-top:10px;cursor:pointer;}
</style>
</head>
<body>
<div class="container">
<h3>Ce vrei să craftezi?</h3>

<div class="field">
<label for="weaponSelect">Arma:</label>
<select id="weaponSelect"><option value="">-- Selectează arma --</option></select>
</div>

<section id="bulletsSection">
<div class="field">
<label for="bullets">Gloanțe:</label>
<select id="bullets"></select>
</div>
</section>

<section id="attachmentsSection">
<h3>Atașamente</h3>
<label><input type="checkbox" id="noAttach"> Nu vreau atașamente</label>
<div id="attachmentList"></div>
</section>

<section id="quantitySection">
<div class="field">
<label for="weaponQty">Număr arme:</label>
<input type="number" id="weaponQty" min="1" value="1">
</div>
</section>

<button id="calcBtn" style="display:none;">Calculează</button>
<div id="result" class="result"></div>
</div>

<div class="popup" id="popup">
<div class="popupContent">
<p id="popupText"></p>
<button onclick="document.getElementById('popup').classList.remove('show')">OK</button>
</div>
</div>
<script>
// ==================== DATELE ARME ====================
const weapons = {
  // ------------------ PISTOLE ------------------
  "PISTOL": {
    type:"craft",
    materials:{steel:8,screw:80,barrel:0,spring:1,wood:0,polymer:20},
    bullets:{100:100,200:200,250:250,300:360,400:480,500:600,600:720,700:840,800:960,900:1080,1000:1200,1500:1800,2000:2400},
    attachments:{
      lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
      amortizor:{steel:2,screw:5,polymer:2},
      incarcator:{steel:1,screw:5,arc:1,polymer:1}
    }
  },
  "COMBAT PISTOL": {
    type:"craft",
    materials:{steel:8,screw:85,barrel:0,spring:0,wood:0,polymer:18},
    bullets:{100:100,200:200,250:250,300:360,400:480,500:600,600:720,700:840,800:960,900:1080,1000:1200,1500:1800,2000:2400},
    attachments:{
      lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
      amortizor:{steel:2,screw:5,polymer:2},
      incarcator:{steel:1,screw:5,arc:1,polymer:1}
    }
  },
  "PISTOL MK2": {
    type:"craft",
    materials:{steel:9,screw:91,barrel:0,spring:1,wood:0,polymer:22},
    bullets:{100:130,200:260,250:325,300:390,400:520,500:650,600:780,700:910,800:1040,900:1170,1000:1300,1500:1950,2000:2600},
    attachments:{
      lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
      amortizor:{steel:2,screw:5,polymer:2},
      incarcator:{steel:1,screw:5,arc:1,polymer:1},
      mounted_scope:{steel:2,screw:10,polymer:2,lupa:1}
    }
  },
  "CERAMIC PISTOL": {
    type:"craft",
    materials:{steel:9,screw:91,barrel:0,spring:1,wood:0,polymer:18},
    bullets:{100:130,200:260,250:325,300:390,400:520,500:650,600:780,700:910,800:1040,900:1170,1000:1300,1500:1950,2000:2600},
    attachments:{
      lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
      amortizor:{steel:2,screw:5,polymer:2},
      incarcator:{steel:1,screw:5,arc:1,polymer:1}
    }
  },
  "PISTOL WM29 (XM3)": {
    type:"craft",
    materials:{steel:10,screw:95,barrel:0,spring:1,wood:0,polymer:20},
    bullets:{100:130,200:260,250:325,300:390,400:520,500:650,600:780,700:910,800:1040,900:1170,1000:1300,1500:1950,2000:2600},
    attachments:{
      amortizor:{steel:2,screw:5,polymer:2},
      incarcator:{steel:1,screw:5,arc:1,polymer:1}
    }
  },

  // ------------------ SMG ------------------
  "MICRO SMG": {
    type:"craft",
    materials:{steel:15,screw:95,barrel:1,spring:1,wood:0,polymer:42},
    bullets:{100:150,200:300,250:375,300:450,400:600,500:750,600:900,700:1050,800:1200,900:1350,1000:1500,1500:2250,2000:3000},
    attachments:{
      lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
      amortizor:{steel:3,screw:5,polymer:3},
      incarcator:{steel:2,screw:10,arc:1,polymer:2},
      luneta:{steel:2,screw:10,polymer:2,lupa:1}
    }
  },
  "MACHINE PISTOL (Tec9)": {
    type:"craft",
    materials:{steel:12,screw:100,barrel:0,spring:1,wood:0,polymer:38},
    bullets:{100:150,200:300,250:375,300:450,400:600,500:750,600:900,700:1050,800:1200,900:1350,1000:1500,1500:2250,2000:3000},
    attachments:{
      amortizor:{steel:2,screw:5,polymer:2},
      incarcator:{steel:2,screw:8,arc:1,polymer:2}
    }
  },
  "MINI SMG": {
    type:"craft",
    materials:{steel:11,screw:97,barrel:0,spring:1,wood:0,polymer:36},
    bullets:{100:150,200:300,250:375,300:450,400:600,500:750,600:900,700:1050,800:1200,900:1350,1000:1500,1500:2250,2000:3000},
    attachments:{
      incarcator:{steel:2,screw:10,arc:1,polymer:2}
    }
  },
  "TEC PISTOL (Tactical SMG)": {
    type:"craft",
    materials:{steel:14,screw:115,barrel:1,spring:1,wood:0,polymer:44},
    bullets:{100:180,200:360,250:450,300:540,400:720,500:900,600:1080,700:1260,800:1440,900:1620,1000:1800,1500:2700,2000:3600},
    attachments:{
      lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
      amortizor:{steel:3,screw:5,polymer:3},
      incarcator:{steel:2,screw:10,arc:1,polymer:2},
      luneta:{steel:2,screw:10,polymer:2,lupa:1}
    }
  },
  "SMG": {
    type:"craft",
    materials:{steel:13,screw:105,barrel:1,spring:1,wood:0,polymer:48},
    bullets:{100:180,200:360,250:450,300:540,400:720,500:900,600:1080,700:1260,800:1440,900:1620,1000:1800,1500:2700,2000:3600},
    attachments:{
      lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
      amortizor:{steel:3,screw:5,polymer:3},
      incarcator:{steel:2,screw:10,arc:1,polymer:2},
      luneta:{steel:2,screw:10,polymer:2,lupa:1},
      baterie:{steel:3,screw:20,arc:1,polymer:3}
    }
  },
  "COMBAT PDW": {
    type:"craft",
    materials:{steel:14,screw:110,barrel:1,spring:1,wood:0,polymer:50},
    bullets:{100:180,200:360,250:450,300:540,400:720,500:900,600:1080,700:1260,800:1440,900:1620,1000:1800,1500:2700,2000:3600},
    attachments:{
      lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
      incarcator:{steel:2,screw:10,arc:1,polymer:2},
      luneta:{steel:2,screw:10,polymer:2,lupa:1},
      baterie:{steel:3,screw:20,arc:1,polymer:3},
      grip:{steel:1,screw:5,arc:1,polymer:1}
    }
  },

  // ------------------ RIFLE ------------------
  "ASSAULT RIFLE (AK)": {
    type:"craft",
    materials:{steel:21,screw:135,barrel:1,spring:2,wood:1,polymer:68},
    bullets:{100:250,200:500,250:625,300:750,400:1000,500:1250,600:1500,700:1750,800:2000,900:2250,1000:2500,1500:3750,2000:5000},
    attachments:{
      lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
      amortizor:{steel:3,screw:5,polymer:3},
      incarcator:{steel:2,screw:5,arc:1,polymer:2},
      luneta:{steel:2,screw:10,polymer:2,lupa:1},
      baterie:{steel:3,screw:20,arc:1,polymer:3},
      grip:{steel:1,screw:5,arc:1,polymer:1}
    }
  },
  "COMPACT RIFLE": {
    type:"craft",
    materials:{steel:19,screw:115,barrel:1,spring:2,wood:1,polymer:44},
    bullets:{100:250,200:500,250:625,300:750,400:1000,500:1250,600:1500,700:1750,800:2000,900:2250,1000:2500,1500:3750,2000:5000},
    attachments:{
      incarcator:{steel:3,screw:30,arc:1,polymer:3},
      baterie:{steel:3,screw:20,arc:1,polymer:3}
    }
  }
};
    <script>
// ------------------ CARABINE & ADVANCED ------------------
weapons["CARABINE RIFLE"] = {
  type:"craft",
  materials:{steel:18,screw:140,barrel:1,spring:2,wood:0,polymer:72},
  bullets:{100:250,200:500,250:625,300:750,400:1000,500:1250,600:1500,700:1750,800:2000,900:2250,1000:2500,1500:3750,2000:5000},
  attachments:{
    lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
    amortizor:{steel:3,screw:5,polymer:3},
    incarcator:{steel:1,screw:5,arc:1,polymer:1},
    luneta:{steel:2,screw:10,polymer:2,lupa:1},
    baterie:{steel:3,screw:20,arc:1,polymer:3},
    grip:{steel:1,screw:5,arc:1,polymer:1}
  }
};

weapons["ADVANCED RIFLE"] = {
  type:"craft",
  materials:{steel:18,screw:145,barrel:1,spring:2,wood:0,polymer:78},
  bullets:{100:250,200:500,250:625,300:750,400:1000,500:1250,600:1500,700:1750,800:2000,900:2250,1000:2500,1500:3750,2000:5000},
  attachments:{
    lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
    amortizor:{steel:3,screw:5,polymer:3},
    incarcator:{steel:1,screw:5,arc:1,polymer:1},
    luneta:{steel:2,screw:10,polymer:2,lupa:1}
  }
};

// ------------------ ARME MONEY ------------------
weapons["HEAVY RIFLE"] = {
  type:"money",
  price:60000,
  attachments:{
    lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
    amortizor:{steel:3,screw:5,polymer:3},
    incarcator:{steel:1,screw:5,arc:1,polymer:1},
    luneta:{steel:2,screw:10,polymer:2,lupa:1},
    grip:{steel:1,screw:5,arc:1,polymer:1}
  }
};

weapons["COMBAT MG"] = {
  type:"money",
  price:120000,
  attachments:{
    lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
    luneta_mare:{steel:2,screw:12,polymer:2,lupa:1},
    luneta_medie:{steel:2,screw:10,polymer:2,lupa:1},
    incarcator:{steel:1,screw:5,arc:1,polymer:1},
    grip:{steel:1,screw:5,arc:1,polymer:1},
    teava:{steel:4,screw:16,arc:4},
    vizor_holografic:{steel:1,screw:8,arc:1,lupa:1},
    muzzle_brakes:{
      slanded:{steel:1,screw:4,arc:1},
      fat_end:{steel:1,screw:4,arc:1},
      heavy_dutty:{steel:1,screw:4,arc:1},
      precision:{steel:1,screw:4,arc:1},
      tactical:{steel:1,screw:4,arc:1},
      flat:{steel:1,screw:4,arc:1},
      split_end:{steel:1,screw:4,arc:1}
    }
  }
};

weapons["ASSAULTRIFLE MK2 (AK)"] = {
  type:"money",
  price:70000,
  attachments:{
    lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
    luneta_mica:{steel:2,screw:10,polymer:2,lupa:1},
    luneta_mare:{steel:2,screw:12,polymer:2,lupa:1},
    incarcator:{steel:2,screw:5,arc:1,polymer:2},
    grip:{steel:1,screw:5,arc:1,polymer:1},
    teava:{steel:4,screw:16,arc:4},
    vizor_holografic:{steel:1,screw:8,arc:1,lupa:1},
    muzzle_brakes:{
      flat:{steel:1,screw:4,arc:1},
      slanded:{steel:1,screw:4,arc:1},
      heavy_dutty:{steel:1,screw:4,arc:1},
      tactical:{steel:1,screw:4,arc:1},
      precision:{steel:1,screw:4,arc:1},
      split_end:{steel:1,screw:4,arc:1},
      fat_end:{steel:1,screw:4,arc:1}
    }
  }
};

weapons["GUSENBERG"] = {
  type:"money",
  price:45000,
  attachments:{
    lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
    incarcator:{steel:1,screw:5,arc:1,polymer:1},
    luneta:{steel:2,screw:10,polymer:2,lupa:1},
    grip:{steel:1,screw:5,arc:1,polymer:1}
  }
};

weapons["MG"] = {
  type:"money",
  price:90000,
  attachments:{
    lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
    incarcator:{steel:1,screw:5,arc:1,polymer:1},
    luneta:{steel:2,screw:10,polymer:2,lupa:1},
    grip:{steel:1,screw:5,arc:1,polymer:1}
  }
};

weapons["Navy Pistol"] = {
  type:"money",
  price:400000,
  attachments:{
    lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
    incarcator:{steel:1,screw:5,arc:1,polymer:1},
    amortizor:{steel:2,screw:5,polymer:2}
  }
};

weapons["DB"] = {
  type:"money",
  price:250000,
  attachments:{
    incarcator:{steel:1,screw:5,arc:1,polymer:1},
    amortizor:{steel:2,screw:5,polymer:2}
  }
};
</script>
<script>
// ==================== POPULARE SELECT ARMES ====================

// Resetare pentru siguranță
weaponSelect.innerHTML = '<option value="">-- Selectează arma --</option>';
Object.keys(weapons).forEach(w => {
    const opt = document.createElement("option");
    opt.value = w;
    opt.text = w;
    weaponSelect.appendChild(opt);
});

// ==================== LOGIC SELECT ARMES ====================
weaponSelect.addEventListener("change", () => {
    const weapon = weapons[weaponSelect.value];
    hideSection(bulletsSection);
    hideSection(attachmentsSection);
    hideSection(quantitySection);
    calcBtn.style.display = "none";
    resultDiv.classList.remove("show");
    bulletsSelect.innerHTML = "";
    attachmentList.innerHTML = "";
    document.getElementById("noAttach").checked = false;

    if (!weapon) return;

    if (weapon.type === "craft") {
        // Populare gloanțe
        Object.keys(weapon.bullets).forEach(b => {
            const opt = document.createElement("option");
            opt.value = b;
            opt.text = b + " gloanțe";
            bulletsSelect.appendChild(opt);
        });
        setTimeout(() => showSection(bulletsSection), 50);
    } else {
        // Arme pe bani nu au gloanțe de selectat
        setTimeout(() => showSection(quantitySection), 50);
        calcBtn.style.display = "block";
    }
});

// ==================== POPULARE ATAȘAMENTE ====================
bulletsSelect.addEventListener("change", () => {
    const weapon = weapons[weaponSelect.value];
    if (!weapon || !weapon.attachments) return;
    attachmentList.innerHTML = "";
    showSection(attachmentsSection);

    const keys = Object.keys(weapon.attachments);
    let i = 0;

    function addNextAttachment() {
        if (i >= keys.length) return;
        const att = keys[i];
        const lbl = document.createElement("label");
        lbl.className = "attachStep";
        lbl.innerHTML = `<input type="checkbox" class="attachCheck" value="${att}"> ${att}`;
        attachmentList.appendChild(lbl);
        setTimeout(() => { lbl.classList.add('show'); addNextAttachment(); }, 100);
        i++;
    }
    addNextAttachment();
    setTimeout(() => showSection(quantitySection), 50);
    calcBtn.style.display = "block";
});

document.getElementById("noAttach").addEventListener("change", function () {
    document.querySelectorAll(".attachCheck").forEach(c => { c.checked = false; c.disabled = this.checked; });
});

// ==================== CALCUL COMPLET ====================
calcBtn.addEventListener("click", () => {
    const weaponKey = weaponSelect.value;
    const weapon = weapons[weaponKey];
    const qty = parseInt(document.getElementById("weaponQty").value) || 1;

    if (!weapon) { showPopup('Selectează o armă!'); return; }

    const totals = { steel: 0, screw: 0, barrel: 0, spring: 0, wood: 0, polymer: 0, powder: 0 };

    // ------------------- CALCULEAZĂ MATERIALELE -------------------
    if (weapon.type === "craft") {
        // Armele craftabile
        for (let k of ["steel", "screw", "barrel", "spring", "wood", "polymer"])
            totals[k] += weapon.materials[k] * qty;

        const bulletVal = parseInt(bulletsSelect.value);
        const bulletPowder = weapon.bullets[bulletVal] || Object.values(weapon.bullets)[0];
        totals.powder += bulletPowder * qty;

    } else {
        // Armele money nu folosesc gloanțe, dar pot avea atașamente
    }

    // ------------------- ATAȘAMENTE -------------------
    document.querySelectorAll(".attachCheck:checked").forEach(att => {
        const data = weapon.attachments[att.value];
        if (!data) return;

        // Dacă sunt multiple tipuri (muzzle_brakes) tratează separat
        if (att.value === "muzzle_brakes" || att.value === "muzzle_brakes_mg") {
            Object.values(data).forEach(sub => {
                for (let k of ["steel", "screw", "barrel", "spring", "wood", "polymer"])
                    totals[k] += (sub[k] || 0) * qty;
            });
        } else {
            for (let k of ["steel", "screw", "barrel", "spring", "wood", "polymer"])
                totals[k] += (data[k] || 0) * qty;
        }
    });

    // ------------------- COST -------------------
    let totalCost = 0;
    if (weapon.type === "craft") {
        totalCost += totals.steel * 5000;
        totalCost += Math.floor(totals.screw / 20) * 5000;
        totalCost += totals.barrel * 4 * 5000;
        totalCost += totals.polymer * 150;
        totalCost += totals.powder * 150;
    } else totalCost += weapon.price * qty;

    // ------------------- AFISARE -------------------
    resultDiv.innerHTML = `<h3>Rezultat</h3>
    Oțel: ${totals.steel}<br>
    Șurub: ${totals.screw}<br>
    Țeavă: ${totals.barrel}<br>
    Arc: ${totals.spring}<br>
    Lemn: ${totals.wood}<br>
    Polimer: ${totals.polymer}<br>
    Praf de pușcă: ${totals.powder}<br>
    <br><strong>Cost total estimativ: ${totalCost.toLocaleString()}$</strong>`;
    resultDiv.classList.add("show");
});
</script>

<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>FiveM Craft Calculator Complet</title>
<style>
body {margin:0; font-family: Arial; background:#111; color:white; display:flex; justify-content:center; padding:20px;}
.container {background: rgba(0,0,0,0.95); padding:30px; width:1000px; border-radius:10px; transition:all 0.3s;}
.field { display:flex; align-items:center; margin:10px 0; }
.field label { width:200px; margin-right:15px; }
.field select, .field input { flex:1; padding:8px; font-size:14px; border-radius:5px; border:1px solid #444; background:#222; color:white; transition:0.3s; }
.field select:hover, .field input:hover { background:#333; }
.field select:focus, .field input:focus { outline:none; border-color:#2ecc71; }
button { cursor:pointer; background:#2ecc71; border:none; color:white; font-weight:bold; padding:10px; margin-top:15px; transition:0.3s; }
button:hover {background:#27ae60;}
.result {margin-top:20px; padding:15px; background:#222; border-radius:8px; transition:all 0.5s; transform: translateY(-20px); opacity:0;}
.result.show { opacity:1; transform:translateY(0);}
h3 {margin:10px 0 5px 0;}
.attachStep { display:flex; align-items:center; margin:5px 0; opacity:0; transform:translateX(-20px); transition: all 0.4s;}
.attachStep.show { opacity:1; transform:translateX(0);}
.attachStep img {width:20px; height:20px; margin-right:8px;}
.attachStep input[type="checkbox"] { margin-right:10px; width:18px; height:18px; accent-color:#2ecc71; cursor:pointer;}
.attachStep input[type="checkbox"]:hover { transform: scale(1.2); transition:0.2s;}
section { overflow:hidden; max-height:0; opacity:0; transition:max-height 0.5s ease-out, opacity 0.3s;}
section.show { max-height:500px; opacity:1;}
.popup { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); display:flex; justify-content:center; align-items:center; opacity:0; transform:translateY(50px); transition:all 0.4s; pointer-events:none; }
.popup.show { opacity:1; transform:translateY(0); pointer-events:auto;}
.popupContent { background:#222; padding:20px; border-radius:10px; color:white; min-width:300px;}
.popupContent button { margin-top:10px; cursor:pointer;}
.material-steel {color:#2ecc71;} .material-screw {color:#f39c12;} .material-barrel {color:#3498db;}
.material-spring {color:#9b59b6;} .material-wood {color:#e67e22;} .material-polymer {color:#1abc9c;} .material-powder {color:#f1c40f;}
#weaponPreview {margin-left:10px; width:60px; height:40px; vertical-align:middle;}
#result img {width:40px; height:25px; margin-right:5px; vertical-align:middle;}
</style>
</head>
<body>
<div class="container">
<h3>Ce vrei să craftezi?</h3>
<div class="field">
<label for="weaponSelect">Arma:</label>
<select id="weaponSelect"><option value="">-- Selectează arma --</option></select>
<img id="weaponPreview" src="" alt="">
</div>

<section id="bulletsSection">
<div class="field">
<label for="bullets">Gloanțe:</label>
<select id="bullets"></select>
</div>
</section>

<section id="attachmentsSection">
<h3>Atașamente</h3>
<label><input type="checkbox" id="noAttach"> Nu vreau atașamente</label>
<div id="attachmentList"></div>
</section>

<section id="quantitySection">
<div class="field">
<label for="weaponQty">Număr arme:</label>
<input type="number" id="weaponQty" min="1" value="1">
</div>
</section>

<button id="calcBtn" style="display:none;">Calculează</button>
<button id="resetBtn" style="display:none;">Resetează</button>
<div id="result" class="result"></div>
</div>

<div class="popup" id="popup">
<div class="popupContent">
<p id="popupText"></p>
<button onclick="document.getElementById('popup').classList.remove('show')">OK</button>
</div>
</div>

<script>
// ==================== DATE ARME (complet) ====================
const weapons={
"PISTOL":{type:"craft",img:"https://i.imgur.com/2V6Uq0l.png",materials:{steel:8,screw:80,barrel:0,spring:1,wood:0,polymer:20},bullets:{100:100,200:200,250:250},attachments:{lanterna:{img:"https://i.imgur.com/KU2s0Gp.png",steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},amortizor:{img:"https://i.imgur.com/FjPCvXP.png",steel:2,screw:5,polymer:2},incarcator:{img:"https://i.imgur.com/y7F1pQa.png",steel:1,screw:5,arc:1,polymer:1}}}},
"COMBAT PISTOL":{type:"craft",img:"https://i.imgur.com/dcXtDjp.png",materials:{steel:8,screw:85,barrel:0,spring:0,wood:0,polymer:18},bullets:{100:100,200:200,250:250},attachments:{lanterna:{img:"https://i.imgur.com/KU2s0Gp.png",steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},amortizor:{img:"https://i.imgur.com/FjPCvXP.png",steel:2,screw:5,polymer:2},incarcator:{img:"https://i.imgur.com/y7F1pQa.png",steel:1,screw:5,arc:1,polymer:1}}}},
"VINTAGE PISTOL":{type:"money",img:"https://i.imgur.com/VHgxv6t.png",price:25000,attachments:{incarcator:{img:"https://i.imgur.com/y7F1pQa.png",steel:1,screw:5,arc:1,polymer:1},amortizor:{img:"https://i.imgur.com/FjPCvXP.png",steel:2,screw:5,polymer:2}}}},
// !!! Aici poți adăuga toate armele tale cu img și date complet
};

// ==================== ELEMENTE UI ====================
const weaponSelect=document.getElementById("weaponSelect");
const weaponPreview=document.getElementById("weaponPreview");
const bulletsSection=document.getElementById("bulletsSection");
const bulletsSelect=document.getElementById("bullets");
const attachmentsSection=document.getElementById("attachmentsSection");
const attachmentList=document.getElementById("attachmentList");
const quantitySection=document.getElementById("quantitySection");
const calcBtn=document.getElementById("calcBtn");
const resetBtn=document.getElementById("resetBtn");
const resultDiv=document.getElementById("result");

// Populare select arme
Object.keys(weapons).forEach(w=>{
    const opt=document.createElement("option"); opt.value=w; opt.text=w;
    weaponSelect.appendChild(opt);
});

// ==================== FUNCTII ====================
function showSection(section){section.classList.add("show");}
function hideSection(section){section.classList.remove("show");}
function showPopup(msg){document.getElementById('popupText').innerText=msg;document.getElementById('popup').classList.add('show');}
function resetAll(){
    weaponSelect.value=""; bulletsSelect.innerHTML=""; attachmentList.innerHTML=""; document.getElementById("noAttach").checked=false;
    hideSection(bulletsSection); hideSection(attachmentsSection); hideSection(quantitySection);
    calcBtn.style.display="none"; resetBtn.style.display="none"; resultDiv.classList.remove("show");
    weaponPreview.src="";
}

// ==================== LOGIC PROGRESIV ====================
weaponSelect.addEventListener("change",()=>{
    resetSections();
    const weapon=weapons[weaponSelect.value];
    if(!weapon) {weaponPreview.src=""; return;}
    weaponPreview.src=weapon.img || "";
    if(weapon.type==="craft"){
        Object.keys(weapon.bullets).forEach(b=>{
            const opt=document.createElement("option"); opt.value=b; opt.text=b;
            bulletsSelect.appendChild(opt);
        });
        setTimeout(()=>showSection(bulletsSection),50);
    } else {
        setTimeout(()=>showSection(quantitySection),50);
        calcBtn.style.display="block"; resetBtn.style.display="block";
    }
});

function resetSections(){
    hideSection(bulletsSection); hideSection(attachmentsSection); hideSection(quantitySection);
    calcBtn.style.display="none"; resetBtn.style.display="none"; resultDiv.classList.remove("show");
    bulletsSelect.innerHTML=""; attachmentList.innerHTML=""; document.getElementById("noAttach").checked=false;
}

// Atașamente
bulletsSelect.addEventListener("change",()=>{
    const weapon=weapons[weaponSelect.value];
    if(!weapon || !weapon.attachments) return;
    attachmentList.innerHTML="";
    showSection(attachmentsSection);
    const keys=Object.keys(weapon.attachments);
    let i=0;
    function addNextAttachment(){
        if(i>=keys.length) return;
        const att=keys[i];
        const lbl=document.createElement("label"); lbl.className="attachStep";
        const imgSrc=weapon.attachments[att].img || "";
        lbl.innerHTML=`<input type="checkbox" class="attachCheck" value="${att}"> <img src="${imgSrc}"> ${att}`;
        attachmentList.appendChild(lbl);
        setTimeout(()=>{lbl.classList.add('show'); addNextAttachment();},100);
        i++;
    }
    addNextAttachment();
    setTimeout(()=>showSection(quantitySection),50);
    calcBtn.style.display="block"; resetBtn.style.display="block";
});

document.getElementById("noAttach").addEventListener("change",function(){
    document.querySelectorAll(".attachCheck").forEach(c=>{c.checked=false;c.disabled=this.checked;});
});

// ==================== CALCUL ====================
calcBtn.addEventListener("click",()=>{
    const weaponKey=weaponSelect.value;
    const weapon=weapons[weaponKey];
    const qty=parseInt(document.getElementById("weaponQty").value)||1;
    if(!weapon){showPopup('Selectează o armă!'); return;}
    const totals={steel:0,screw:0,barrel:0,spring:0,wood:0,polymer:0,powder:0};

    if(weapon.type==="craft"){
        for(let k of ["steel","screw","barrel","spring","wood","polymer"])
            totals[k]+=weapon.materials[k]*qty;
        const bulletVal=parseInt(bulletsSelect.value);
        const bulletPowder=weapon.bullets[bulletVal]||Object.values(weapon.bullets)[0];
        totals.powder+=bulletPowder*qty;
    }

    document.querySelectorAll(".attachCheck:checked").forEach(att=>{
        const data=weapon.attachments[att.value];
        if(!data) return;
        for(let k of ["steel","screw","barrel","spring","wood","polymer"])
            totals[k]+=(data[k]||0)*qty;
    });

    let totalCost=0;
    if(weapon.type==="craft"){
        totalCost+=totals.steel*5000;
        totalCost+=Math.floor(totals.screw/20)*5000;
        totalCost+=totals.barrel*4*5000;
        totalCost+=totals.polymer*150;
        totalCost+=totals.powder*150;
    }else totalCost+=weapon.price*qty;

    // Rezultat cu imagini atașamente
    let attHTML="";
    document.querySelectorAll(".attachCheck:checked").forEach(att=>{
        const imgSrc=weapon.attachments[att.value].img || "";
        attHTML+=`<img src="${imgSrc}" title="${att.value}">`;
    });

    resultDiv.innerHTML=`<h3>Rezultat</h3>
    <img src="${weapon.img}" alt="${weaponKey}"> ${weaponKey}<br>
    ${attHTML}<br>
    <span class="material-steel">Oțel: ${totals.steel}</span><br>
    <span class="material-screw">Șurub: ${totals.screw}</span><br>
    <span class="material-barrel">Țeavă: ${totals.barrel}</span><br>
    <span class="material-spring">Arc: ${totals.spring}</span><br>
    <span class="material-wood">Lemn: ${totals.wood}</span><br>
    <span class="material-polymer">Polimer: ${totals.polymer}</span><br>
    <span class="material-powder">Praf de pușcă: ${totals.powder}</span><br>
    <br><strong>Cost total estimativ: ${totalCost.toLocaleString()}$</strong>`;
    resultDiv.classList.add("show");
    resetBtn.style.display="block";
});

resetBtn.addEventListener("click", resetAll);
</script>
</body>
</html>

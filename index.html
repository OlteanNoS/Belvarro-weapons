<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>Weapon Calculator</title>

<style>
body{
    background:#111;
    color:white;
    font-family:Arial;
    display:flex;
    justify-content:center;
    padding:40px;
}
.container{
    background:#1e1e1e;
    padding:30px;
    border-radius:10px;
    width:500px;
}
select,input{
    width:100%;
    padding:8px;
    margin:10px 0;
    background:#222;
    color:white;
    border:1px solid #444;
}
button{
    width:100%;
    padding:10px;
    background:#2ecc71;
    border:none;
    color:white;
    font-weight:bold;
    cursor:pointer;
}
.result{
    margin-top:20px;
    padding:15px;
    background:#222;
    border-radius:6px;
}
</style>
</head>

<body>
<div class="container">

<h2>Weapon Calculator</h2>

<select id="weaponSelect">
<option value="">-- Selectează arma --</option>
</select>

<select id="bullets" style="display:none;"></select>

<input type="number" id="qty" value="1" min="1" placeholder="Număr arme">

<div id="attachments"></div>

<button onclick="calculate()">Calculează</button>

<div id="result" class="result"></div>

</div>

<script>

const weapons = {

// ================= PISTOLS =================
"PISTOL":{
type:"craft",
materials:{steel:8,screw:80,barrel:0,spring:1,wood:0,polymer:20},
bullets:{100:100,200:200,250:250,300:300,400:400,500:500,1000:1000,2000:2000},
attachments:{
lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
amortizor:{steel:2,screw:5,polymer:2},
incarcator:{steel:1,screw:5,arc:1,polymer:1}
}
},

"COMBAT PISTOL":{
type:"craft",
materials:{steel:8,screw:85,barrel:0,spring:0,wood:0,polymer:18},
bullets:{100:100,200:200,250:250,300:300,400:400,500:500,1000:1000,2000:2000},
attachments:{
lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
amortizor:{steel:2,screw:5,polymer:2},
incarcator:{steel:1,screw:5,arc:1,polymer:1}
}
},

"PISTOL MK2":{
type:"craft",
materials:{steel:9,screw:91,barrel:0,spring:1,wood:0,polymer:22},
bullets:{100:130,200:260,250:325,300:390,400:520,500:650,1000:1300,2000:2600},
attachments:{
lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
amortizor:{steel:2,screw:5,polymer:2},
incarcator:{steel:1,screw:5,arc:1,polymer:1},
scope:{steel:2,screw:10}
}
},

"CERAMIC PISTOL":{
type:"craft",
materials:{steel:9,screw:91,barrel:0,spring:0,wood:0,polymer:18},
bullets:{100:130,200:260,250:325,300:390,400:520,500:650,1000:1300,2000:2600},
attachments:{
amortizor:{steel:2,screw:5,polymer:2},
incarcator:{steel:1,screw:5,arc:1,polymer:1}
}
},

"PISTOL WM29 (XM3)":{
type:"craft",
materials:{steel:10,screw:95,barrel:0,spring:1,wood:0,polymer:20},
bullets:{100:130,200:260,250:325,300:390,400:520,500:650,1000:1300,2000:2600},
attachments:{
amortizor:{steel:2,screw:5,polymer:2}
}
},

// ================= SMG =================
"MICRO SMG":{
type:"craft",
materials:{steel:15,screw:95,barrel:0,spring:1,wood:0,polymer:42},
bullets:{100:150,200:300,250:375,300:450,400:600,500:750,1000:1500,2000:3000},
attachments:{
lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
amortizor:{steel:3,screw:5,polymer:2},
incarcator:{steel:2,screw:10,arc:1,polymer:1},
scope:{steel:2,screw:10}
}
},

"SMG":{
type:"craft",
materials:{steel:13,screw:105,barrel:0,spring:1,wood:0,polymer:48},
bullets:{100:180,200:360,250:450,300:540,400:720,500:900,1000:1800,2000:3600},
attachments:{
lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
amortizor:{steel:3,screw:5,polymer:2},
incarcator:{steel:2,screw:10,arc:1,polymer:1},
scope:{steel:2,screw:10}
}
},

"COMBAT PDW":{
type:"craft",
materials:{steel:14,screw:110,barrel:0,spring:1,wood:0,polymer:50},
bullets:{100:180,200:360,250:450,300:540,400:720,500:900,1000:1800,2000:3600},
attachments:{
lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
incarcator:{steel:2,screw:10,arc:1,polymer:1},
scope:{steel:2,screw:10}
}
},

// ================= RIFLES =================
"ASSAULT RIFLE (AK)":{
type:"craft",
materials:{steel:21,screw:135,barrel:1,spring:1,wood:0,polymer:68},
bullets:{100:250,200:500,250:625,300:750,400:1000,500:1250,1000:2500,2000:5000},
attachments:{
lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
amortizor:{steel:3,screw:5,polymer:2},
incarcator:{steel:2,screw:5,arc:1,polymer:1},
scope:{steel:2,screw:10}
}
},

"CARABINE RIFLE":{
type:"craft",
materials:{steel:18,screw:140,barrel:1,spring:1,wood:0,polymer:72},
bullets:{100:300,200:600,250:750,300:900,400:1200,500:1500,1000:3000,2000:6000},
attachments:{
lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
amortizor:{steel:3,screw:5,polymer:2},
incarcator:{steel:1,screw:5,arc:1,polymer:1},
scope:{steel:2,screw:10}
}
},

"ADVANCED RIFLE":{
type:"craft",
materials:{steel:18,screw:145,barrel:1,spring:1,wood:0,polymer:78},
bullets:{100:300,200:600,250:750,300:900,400:1200,500:1500,1000:3000,2000:6000},
attachments:{
lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},
amortizor:{steel:3,screw:5,polymer:2},
incarcator:{steel:1,screw:5,arc:1,polymer:1},
scope:{steel:2,screw:10}
}
},

// ================= MONEY WEAPONS =================
"VINTAGE PISTOL":{
type:"money",
price:25000,
attachments:{
incarcator:{steel:1,screw:5,arc:1,polymer:1},
amortizor:{steel:2,screw:5,polymer:2}
}
},

"NAVY PISTOL":{
type:"money",
price:400000,
attachments:{
incarcator:{steel:1,screw:5,arc:1,polymer:1},
amortizor:{steel:2,screw:5,polymer:2}
}
},

"DB":{
type:"money",
price:250000,
attachments:{
incarcator:{steel:1,screw:5,arc:1,polymer:1}
}
},

"ASSAULTRIFLE MK2":{
type:"money",
price:70000,
attachments:{
incarcator:{steel:2,screw:5,arc:1,polymer:1},
amortizor:{steel:3,screw:5,polymer:2},
scope:{steel:2,screw:12}
}
},

"HEAVYRIFLE":{
type:"money",
price:60000,
attachments:{
incarcator:{steel:1,screw:5,arc:1,polymer:1},
amortizor:{steel:3,screw:5,polymer:2},
scope:{steel:2,screw:10},
lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1}
}
},

"COMBAT MG":{
type:"money",
price:120000,
attachments:{
incarcator:{steel:1,screw:5,arc:1,polymer:1},
scope:{steel:2,screw:12},
lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1}
}
},

"GUSENBERG":{
type:"money",
price:45000,
attachments:{
incarcator:{steel:1,screw:5,arc:1,polymer:1}
}
},

"MG":{
type:"money",
price:90000,
attachments:{
incarcator:{steel:1,screw:5,arc:1,polymer:1}
}
}

};


const weaponSelect=document.getElementById("weaponSelect");
const bulletsSelect=document.getElementById("bullets");
const attachmentsDiv=document.getElementById("attachments");

for(let i=100;i<=2000;i+=100){
    const opt=document.createElement("option");
    opt.value=i;
    opt.text=i;
    bulletsSelect.appendChild(opt);
}

weaponSelect.addEventListener("change",()=>{
    const weapon=weapons[weaponSelect.value];

    hideSection(bulletsSection);
    hideSection(attachmentsSection);
    hideSection(quantitySection);

    calcBtn.style.display="none";
    resultDiv.classList.remove("show");

    bulletsSelect.innerHTML="";
    attachmentList.innerHTML="";
    document.getElementById("noAttach").checked=false;

    if(!weapon) return;

    // ✅ Afișăm gloanțe dacă există
    if(weapon.bullets){
        Object.keys(weapon.bullets).forEach(b=>{
            const opt=document.createElement("option");
            opt.value=b;
            opt.text=b;
            bulletsSelect.appendChild(opt);
        });

        setTimeout(()=>showSection(bulletsSection),50);
    }

    // ✅ Afișăm atașamente dacă există
    if(weapon.attachments){
        attachmentList.innerHTML="";
        const keys=Object.keys(weapon.attachments);

        keys.forEach((att,i)=>{
            const lbl=document.createElement("label");
            lbl.className="attachStep";
            lbl.innerHTML=`<input type="checkbox" class="attachCheck" value="${att}"> ${att}`;
            attachmentList.appendChild(lbl);

            setTimeout(()=>lbl.classList.add("show"), i*100);
        });

        setTimeout(()=>showSection(attachmentsSection),100);
    }

    setTimeout(()=>showSection(quantitySection),150);
    calcBtn.style.display="block";
});

    if(weapon.attachments){
        Object.keys(weapon.attachments).forEach(att=>{
            attachmentsDiv.innerHTML+=
            `<label>
                <input type="checkbox" value="${att}">
                ${att}
            </label><br>`;
        });
    }

});

function calculate(){

    const weapon=weapons[weaponSelect.value];
    const qty=parseInt(document.getElementById("qty").value)||1;

    if(!weapon){
        alert("Selectează o armă!");
        return;
    }

    let steel=0;
    let screw=0;
    let polymer=0;
    let powder=0;
    let totalCost=0;

    if(weapon.type==="craft"){
        steel+=weapon.materials.steel*qty;
        screw+=weapon.materials.screw*qty;
        polymer+=weapon.materials.polymer*qty;

        const bullets=parseInt(bulletsSelect.value);
        powder+=weapon.bullets[bullets]*qty;

        totalCost+=steel*5000;
        totalCost+=Math.floor(screw/20)*5000;
        totalCost+=polymer*150;
        totalCost+=powder*150;
    }

    if(weapon.type==="money"){
        totalCost+=weapon.price*qty;
    }

    document.querySelectorAll("#attachments input:checked").forEach(box=>{
        const data=weapon.attachments[box.value];
        steel+= (data.steel||0)*qty;
        screw+= (data.screw||0)*qty;
    });

    document.getElementById("result").innerHTML=
    `
    Oțel: ${steel}<br>
    Șuruburi: ${screw}<br>
    Polimer: ${polymer}<br>
    Praf de pușcă: ${powder}<br><br>
    <strong>Cost total: ${totalCost}$</strong>
    `;
}

</script>

</body>
</html>

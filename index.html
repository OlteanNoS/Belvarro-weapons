<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>FiveM Craft Calculator Complet</title>
<style>
body {margin:0; font-family: Arial; background:#111; color:white; display:flex; justify-content:center; padding:20px;}
.container {background: rgba(0,0,0,0.95); padding:30px; width:1000px; border-radius:10px;}
.field { display:flex; align-items:center; margin:10px 0; }
.field label { width:200px; margin-right:15px; }
.field select, .field input { flex:1; padding:8px; font-size:14px; border-radius:5px; border:1px solid #444; background:#222; color:white; }
button { cursor:pointer; background:#2ecc71; border:none; color:white; font-weight:bold; padding:10px; margin-top:15px; }
button:hover {background:#27ae60;}
section { overflow:hidden; max-height:0; opacity:0; transition:max-height 0.5s ease, opacity 0.3s; margin-bottom:10px;}
section.show { max-height:500px; opacity:1;}
.attachStep { display:flex; align-items:center; margin:5px 0;}
.attachStep img {width:20px; height:20px; margin-right:8px;}
.attachStep input[type="checkbox"] { margin-right:10px; width:18px; height:18px; accent-color:#2ecc71; cursor:pointer;}
#weaponPreview {margin-left:10px; width:60px; height:40px;}
#result img {width:40px; height:25px; margin-right:5px;}
.result {margin-top:20px; padding:15px; background:#222; border-radius:8px;}
</style>
</head>
<body>
<div class="container">
<h3>Ce vrei să craftezi?</h3>
<div class="field">
<label for="weaponSelect">Arma:</label>
<select id="weaponSelect"><option value="">-- Selectează arma --</option></select>
<img id="weaponPreview" src="" alt="">
</div>

<section id="bulletsSection">
<div class="field">
<label for="bullets">Gloanțe:</label>
<select id="bullets"></select>
</div>
</section>

<section id="attachmentsSection">
<h3>Atașamente</h3>
<label><input type="checkbox" id="noAttach"> Nu vreau atașamente</label>
<div id="attachmentList"></div>
</section>

<section id="quantitySection">
<div class="field">
<label for="weaponQty">Număr arme:</label>
<input type="number" id="weaponQty" min="1" value="1">
</div>
</section>

<button id="calcBtn" style="display:none;">Calculează</button>
<button id="resetBtn" style="display:none;">Resetează</button>
<div id="result" class="result"></div>
</div>

<script>
// ==================== DATE ARME + ATAȘAMENTE ====================
const weapons={
"PISTOL":{type:"craft",materials:{steel:8,screw:80,barrel:0,spring:1,wood:0,polymer:20},bullets:{100:100,200:200,250:250},attachments:{lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},amortizor:{steel:2,screw:5,polymer:2},incarcator:{steel:1,screw:5,arc:1,polymer:1}}}},
"COMBAT PISTOL":{type:"craft",materials:{steel:8,screw:85,barrel:0,spring:0,wood:0,polymer:18},bullets:{100:100,200:200,250:250},attachments:{lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},amortizor:{steel:2,screw:5,polymer:2},incarcator:{steel:1,screw:5,arc:1,polymer:1}}}},
"PISTOL MK2":{type:"craft",materials:{steel:9,screw:91,barrel:0,spring:1,wood:0,polymer:22},bullets:{100:130,200:260,250:325},attachments:{incarcator:{steel:1,screw:5,arc:1,polymer:1},mountedScope:{steel:2,screw:10,polymer:2,lupa:1},amortizor:{steel:2,screw:5,polymer:2},lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1}}}},
"CERAMIC PISTOL":{type:"craft",materials:{steel:9,screw:91,barrel:0,spring:1,wood:0,polymer:18},bullets:{100:130,200:260,250:325},attachments:{amortizor:{steel:2,screw:5,polymer:2},incarcator:{steel:1,screw:5,arc:1,polymer:1}}}},
"PISTOL WM29 (XM3)":{type:"craft",materials:{steel:10,screw:95,barrel:0,spring:1,wood:0,polymer:20},bullets:{100:130,200:260,250:325},attachments:{amortizor:{steel:2,screw:5,polymer:2}}}},
"MICRO SMG":{type:"craft",materials:{steel:15,screw:95,barrel:1,spring:1,wood:0,polymer:42},bullets:{100:150,200:300,250:375},attachments:{luneta:{steel:2,screw:10,polymer:2,lupa:1},lanterna:{steel:1,screw:5,polymer:1,bec:1,lupa:1},amortizor:{steel:3,screw:5,polymer:3},incarcator:{steel:2,screw:10,arc:1,polymer:2}}}},
"TEC PISTOL (Tactical SMG)":{type:"craft",materials:{steel:14,screw:115,barrel:1,spring:1,wood:0,polymer:44},bullets:{100:150,200:300,250:375},attachments:{luneta:{steel:2,screw:10,polymer:2,lupa:1},incarcator:{steel:2,screw:10,arc:1,polymer:2},suppresor:{steel:3,screw:5,polymer:3}}}},
"VINTAGE PISTOL":{type:"money",price:25000,attachments:{incarcator:{steel:1,screw:5,arc:1,polymer:1},amortizor:{steel:2,screw:5,polymer:2}}}},
"DB":{type:"money",price:250000,attachments:{}},
"Navy Pistol":{type:"money",price:400000,attachments:{}}
};

// ==================== ELEMENTE UI ====================
const weaponSelect=document.getElementById("weaponSelect");
const weaponPreview=document.getElementById("weaponPreview");
const bulletsSection=document.getElementById("bulletsSection");
const bulletsSelect=document.getElementById("bullets");
const attachmentsSection=document.getElementById("attachmentsSection");
const attachmentList=document.getElementById("attachmentList");
const quantitySection=document.getElementById("quantitySection");
const calcBtn=document.getElementById("calcBtn");
const resetBtn=document.getElementById("resetBtn");
const resultDiv=document.getElementById("result");

// Populare select arme
Object.keys(weapons).forEach(w=>{
    const opt=document.createElement("option"); opt.value=w; opt.text=w;
    weaponSelect.appendChild(opt);
});

// ==================== FUNCTII ====================
function hideAll(){[bulletsSection,attachmentsSection,quantitySection].forEach(s=>s.classList.remove("show")); bulletsSelect.innerHTML=""; attachmentList.innerHTML=""; calcBtn.style.display="none"; resetBtn.style.display="none"; resultDiv.innerHTML="";}
function showSection(section){section.classList.add("show");}

// ==================== LOGIC PROGRESIV ====================
weaponSelect.addEventListener("change",()=>{
    hideAll();
    const w=weapons[weaponSelect.value];
    if(!w) {weaponPreview.src=""; return;}
    weaponPreview.src="";
    weaponPreview.src=""; 
    if(w.type==="craft"){
        bulletsSelect.innerHTML="";
        Object.keys(w.bullets).forEach(b=>{ const opt=document.createElement("option"); opt.value=b; opt.text=b; bulletsSelect.appendChild(opt); });
        showSection(bulletsSection);
    } else showSection(quantitySection);
});

bulletsSelect.addEventListener("change",()=>{
    const w=weapons[weaponSelect.value];
    if(!w) return;
    attachmentList.innerHTML="";
    showSection(attachmentsSection);
    Object.keys(w.attachments).forEach(att=>{
        const lbl=document.createElement("label"); lbl.className="attachStep";
        const a=w.attachments[att];
        lbl.innerHTML=`<input type="checkbox" class="attachCheck" value="${att}"> ${att}`;
        attachmentList.appendChild(lbl);
    });
    showSection(quantitySection);
    calcBtn.style.display="block"; resetBtn.style.display="block";
});

document.getElementById("noAttach").addEventListener("change",function(){document.querySelectorAll(".attachCheck").forEach(c=>{c.checked=false;c.disabled=this.checked;});});

// ==================== CALCUL ====================
calcBtn.addEventListener("click",()=>{
    const w=weapons[weaponSelect.value];
    if(!w) return alert("Selectează o armă!");
    const qty=parseInt(document.getElementById("weaponQty").value)||1;
    const totals={steel:0,screw:0,barrel:0,spring:0,wood:0,polymer:0,powder:0};
    if(w.type==="craft"){
        for(let k of ["steel","screw","barrel","spring","wood","polymer"]) totals[k]+=w.materials[k]*qty;
        const bullets=parseInt(bulletsSelect.value);
        totals.powder+=w.bullets[bullets]*qty;
    }
    document.querySelectorAll(".attachCheck:checked").forEach(att=>{
        const a=w.attachments[att.value]; if(!a) return;
        for(let k of ["steel","screw","barrel","spring","wood","polymer"]) totals[k]+=(a[k]||0)*qty;
    });
    let totalCost=0;
    if(w.type==="craft"){ totalCost+=totals.steel*5000; totalCost+=Math.floor(totals.screw/20)*5000; totalCost+=totals.barrel*4*5000; totalCost+=totals.polymer*150; totalCost+=totals.powder*150; } 
    else totalCost+=w.price*qty;

    resultDiv.innerHTML=`<h3>Rezultat</h3>
    ${weaponSelect.value}<br>
    Oțel:${totals.steel}<br>Șurub:${totals.screw}<br>Țeavă:${totals.barrel}<br>Arc:${totals.spring}<br>Lemn:${totals.wood}<br>Polimer:${totals.polymer}<br>Praf:${totals.powder}<br><strong>Total:${totalCost}$</strong>`;
});

resetBtn.addEventListener("click",()=>{weaponSelect.value=""; weaponPreview.src=""; hideAll();});
</script>
</body>
</html>

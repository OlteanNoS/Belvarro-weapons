<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Weapon Calculator</title>

<style>
body{
    background:#0f0f0f;
    color:white;
    font-family:Arial;
    padding:20px;
}

.container{
    max-width:600px;
    margin:auto;
    background:#1a1a1a;
    padding:20px;
    border-radius:10px;
}

select,input,button{
    width:100%;
    padding:10px;
    margin-top:10px;
    border-radius:5px;
    border:none;
}

button{
    background:#ff9800;
    color:black;
    font-weight:bold;
    cursor:pointer;
}

.attachments label{
    display:block;
    margin-top:5px;
}

.result{
    margin-top:20px;
    background:#111;
    padding:15px;
    border-radius:8px;
}
</style>
</head>

<body>

<div class="container">

<h2>Weapon Calculator</h2>

<select id="weaponSelect">
<option value="">-- Selectează arma --</option>
</select>

<div id="bulletSection" style="display:none;">
<select id="bulletSelect"></select>
</div>

<input type="number" id="qty" placeholder="Cantitate arme" value="1">

<div id="attachmentSection" class="attachments"></div>

<button id="calcBtn">Calculează</button>

<div id="result" class="result"></div>

</div>

<script>

const weapons = {

pistol:{
label:"PISTOL",
type:"craft",
materials:{steel:8,screw:80,spring:1,polymer:20},
bullets:{powder:100,price:5400},
attachments:{
Lanterna:{steel:1,screw:5,polymer:1,bec:1,lupa:1},
Amortizor:{steel:2,screw:5,polymer:2},
Incarcator:{steel:1,screw:5,spring:1,polymer:1}
}
},

combat_pistol:{
label:"COMBAT PISTOL",
type:"craft",
materials:{steel:8,screw:85,polymer:18},
bullets:{powder:100,price:5400},
attachments:{
Lanterna:{steel:1,screw:5,polymer:1,bec:1,lupa:1},
Amortizor:{steel:2,screw:5,polymer:2},
Incarcator:{steel:1,screw:5,spring:1,polymer:1}
}
},

micro_smg:{
label:"MICRO SMG",
type:"craft",
materials:{steel:15,screw:95,spring:1,polymer:42},
bullets:{powder:150,price:8000},
attachments:{
Lanterna:{steel:1,screw:5,polymer:1,bec:1,lupa:1},
Amortizor:{steel:3,screw:5,polymer:3},
Incarcator:{steel:2,screw:10,spring:1,polymer:2}
}
},

ak:{
label:"ASSAULT RIFLE (AK)",
type:"craft",
materials:{steel:21,screw:135,spring:2,polymer:68},
bullets:{powder:250,price:13400},
attachments:{
Lanterna:{steel:1,screw:5,polymer:1,bec:1,lupa:1},
Amortizor:{steel:3,screw:5,polymer:3},
Incarcator:{steel:2,screw:5,spring:1,polymer:2},
Grip:{steel:1,screw:5,polymer:1}
}
},

navy:{
label:"Navy Pistol",
type:"money",
price:400000,
bullets:{powder:100,price:5400},
attachments:{}
},

combat_mg:{
label:"COMBAT MG",
type:"money",
price:120000,
bullets:{powder:300,price:16000},
attachments:{
"Luneta-Mare":{steel:2,screw:12,polymer:2,lupa:1},
"Luneta-Medie":{steel:2,screw:10,polymer:2,lupa:1},
"Incarcator":{steel:1,screw:5,spring:1,polymer:1},
"Grip":{steel:1,screw:5,polymer:1},
"Teava":{steel:4,screw:16,polymer:4},
"Vizor-Holografic":{steel:1,screw:8,polymer:1,lupa:1},
"Slanded-Muzzle-Brake":{steel:1,screw:4,polymer:1},
"Fat-End-Muzzle-Brake":{steel:1,screw:4,polymer:1},
"Heavy-Dutty-Muzzle-Brake":{steel:1,screw:4,polymer:1},
"Precision-Muzzle-Brake":{steel:1,screw:4,polymer:1},
"Tactical-Muzzle-Brake":{steel:1,screw:4,polymer:1},
"Flat-Muzzle-Brake":{steel:1,screw:4,polymer:1},
"Split-End-Muzzle-Brake":{steel:1,screw:4,polymer:1}
}
},

const weaponSelect=document.getElementById("weaponSelect");
const bulletSelect=document.getElementById("bulletSelect");
const bulletSection=document.getElementById("bulletSection");
const attachmentSection=document.getElementById("attachmentSection");
const result=document.getElementById("result");

Object.keys(weapons).forEach(key=>{
    const opt=document.createElement("option");
    opt.value=key;
    opt.textContent=weapons[key].label;
    weaponSelect.appendChild(opt);
});

weaponSelect.addEventListener("change",()=>{

const weapon=weapons[weaponSelect.value];

attachmentSection.innerHTML="";
bulletSection.style.display="none";

if(!weapon) return;

bulletSelect.innerHTML="";
for(let i=100;i<=2000;i+=100){
    const opt=document.createElement("option");
    opt.value=i;
    opt.textContent=i+" gloanțe";
    bulletSelect.appendChild(opt);
}

bulletSection.style.display="block";

Object.keys(weapon.attachments).forEach(att=>{
    const label=document.createElement("label");
    label.innerHTML=`<input type="checkbox" value="${att}"> ${att}`;
    attachmentSection.appendChild(label);
});

});

document.getElementById("calcBtn").addEventListener("click",()=>{

const weapon=weapons[weaponSelect.value];
if(!weapon){ result.innerHTML="Selectează arma!"; return; }

const qty=parseInt(document.getElementById("qty").value)||1;
const bullets=parseInt(bulletSelect.value)||100;

let totals={steel:0,screw:0,spring:0,polymer:0,bec:0,lupa:0,powder:0};
let totalCost=0;

if(weapon.type==="craft"){
    Object.keys(weapon.materials).forEach(k=>{
        totals[k]=(totals[k]||0)+(weapon.materials[k]*qty);
    });
}

let multiplier=bullets/100;

totals.powder+=weapon.bullets.powder*multiplier*qty;
totalCost+=weapon.bullets.price*multiplier*qty;

document.querySelectorAll("#attachmentSection input:checked").forEach(cb=>{
    const data=weapon.attachments[cb.value];
    Object.keys(data).forEach(k=>{
        totals[k]=(totals[k]||0)+(data[k]*qty);
    });
});

if(weapon.type==="money"){
    totalCost+=weapon.price*qty;
}

result.innerHTML=`
Oțel: ${totals.steel||0}<br>
Șurub: ${totals.screw||0}<br>
Arc: ${totals.spring||0}<br>
Polimer: ${totals.polymer||0}<br>
Bec: ${totals.bec||0}<br>
Lupă: ${totals.lupa||0}<br>
Praf: ${totals.powder||0}<br><br>
<b>Cost estimativ: ${totalCost.toLocaleString()}$</b>
`;

});

</script>

</body>
</html>
